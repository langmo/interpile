---
layout : layout
title : Videos of sandpile identity dynamics
pagetitle : Home
---

<p>
Select below for which domain, start configuration and harmonic field you want to display the harmonic sandpile dynamics.
</p>
<p>
If player is not loading or an error occurred, you can visit our YouTube channel to watch the movies directly:<br />
<a href="https://www.youtube.com/channel/UCD-1U3y52P7jx_RNqthASpQ" target="_blank">https://www.youtube.com/channel/UCD-1U3y52P7jx_RNqthASpQ</a>.
</p>
<div style="width:100%;">
	<div style="float:left;padding: 0px 10px 5px 10px;border: 1px solid black;margin:0px 0px 10px 0px;width:220px;">
		<p style="margin: 0px 0 0px 0;">
			Mode:<br />
			<select name="mode" id="mode" size="1" onchange="setMode()">
				<option value="dynamics" selected="selected">Harmonic Dynamics</option>
				<option value="scaling">Domain Scaling</option>
				<option value="mask">Domain Transformation</option>
			</select>
		</p>
	</div>
	<div id="domainDiv" style="float:left;padding: 0px 10px 5px 10px;border: 1px solid black;margin:0px 0px 10px 0px;width:220px;">
		<p style="margin: 0px 0 0px 0;">
			Domain:<br />
			<select name="domains" id="domains" size="1" onchange="initConfiguration()"> 
			</select>
		</p>
	</div>
	<div id="configurationDiv" style="float:left;padding: 0px 10px 5px 10px;border: 1px solid black;margin:0px 0px 10px 0px;width:220px;">
		<p style="margin: 0px 0 0px 0;">
			Start Configuration:<br />
			<select name="configuration" id="configuration" size="1" onchange="initHarmonic()"> 
			</select>
		</p>
	</div>
	<div id="harmonicDiv" style="float:left;padding: 0px 10px 5px 10px;border: 1px solid black;margin:0px 0px 10px 0px;width:220px;">
		<p style="margin: 0px 0 0px 0;">
			Harmonic Field:<br />
			<select name="harmonic" id="harmonic" size="1"> 
			</select>
			</p>
	</div>
	
	<div id="scalingHarmonicsDiv" style="display:none;float:left;padding: 0px 10px 5px 10px;border: 1px solid black;margin:0px 0px 10px 0px;width:220px;">
		<p style="margin: 0px 0 0px 0;">
			Harmonic:<br />
			<select name="scalingHarmonics" id="scalingHarmonics" size="1" onchange="initScalingTime(true)"> 
			</select>
		</p>
	</div>
	<div id="scalingTimeDiv" style="display:none;float:left;padding: 0px 10px 5px 10px;border: 1px solid black;margin:0px 0px 10px 0px;width:220px;">
		<p style="margin: 0px 0 0px 0;">
			Time:<br />
			<select name="scalingTime" id="scalingTime" size="1"> 
			</select>
			</p>
	</div>
	
	<div id="maskTrafoDiv" style="display:none;float:left;padding: 0px 10px 5px 10px;border: 1px solid black;margin:0px 0px 10px 0px;width:220px;">
		<p style="margin: 0px 0 0px 0;">
			Transformation:<br />
			<select name="maskTrafo" id="maskTrafo" size="1" onchange="initMaskHarmonics()"> 
			</select>
		</p>
	</div>
	<div id="maskHarmonicsDiv" style="display:none;float:left;padding: 0px 10px 5px 10px;border: 1px solid black;margin:0px 0px 10px 0px;width:220px;">
		<p style="margin: 0px 0 0px 0;">
			Harmonic:<br />
			<select name="maskHarmonics" id="maskHarmonics" size="1" onchange="initMaskTime(true)"> 
			</select>
		</p>
	</div>
	<div id="maskTimeDiv" style="display:none;float:left;padding: 0px 10px 5px 10px;border: 1px solid black;margin:0px 0px 10px 0px;width:220px;">
		<p style="margin: 0px 0 0px 0;">
			Time:<br />
			<select name="maskTime" id="maskTime" size="1"> 
			</select>
			</p>
	</div>
</div>
<br clear ="all" />
<div id="playerBox" style="width: 100%;padding: 0px;margin:0px"><div id="player"></div></div>
<p>White pixels represent vertices carrying zero particles, while green, blue and black pixels represent vertices carrying one, two or three particles, respectively.</p>
    <script>
	var videos = [
		// Domain				Configuration 		Harmonic 			VideoID
		["255 x 255 Square", 	"Identity", 		"Roundtrip", 		"4EETd94ud1o"],
		
		["255 x 255 Square", 	"Identity", 		"H1a=i", 			"h4yStj7Oh2M"],
		["255 x 255 Square", 	"Identity", 		"H2a=ij", 			"4_WaR-ynTGw"],
		["255 x 255 Square", 	"Identity", 		"H2a=ij (stoch.)", 	"kLECcH_aGvo"],
		["255 x 255 Square", 	"Identity", 		"H2b=i^2-j^2", 		"b0zoIcrHmnw"],
		["255 x 255 Square", 	"Identity", 		"H3a=i^3-3ij^2", 	"NTE09UmqZU8"],
		["255 x 255 Square", 	"Identity", 		"H4a=i^4-6i^2j^2+j^4-i^2-j^2", 	"HW4YQZyDMWw"],
		["255 x 255 Square", 	"Identity", 		"H4b=i^3j-ij^3", 	"WeWkpKV5AuI"],
		["255 x 255 Square", 	"Identity", 		"H5a=3i^5-30i^3j^2+15ij^4-10i^3", 	"OU-oCOKpYww"],
		["255 x 255 Square", 	"Identity", 		"superharmonic", 	"VqegtTS4BBI"],
		
		["255 x 255 Square", 	"C2=2", 			"H2a=ij", 			"gna3htIB9v0"],
		["255 x 255 Square", 	"C2=2", 			"H2b=i^2-j^2", 		"B3w24DflB44"],
		["255 x 255 Square", 	"C2=2", 			"H3a=i^3-3ij^2", 	"ForU7hCuzwc"],
		
		["255 x 255 Square", 	"C3=3", 			"H2a=ij", 			"m3UglpgsGzo"],
		["255 x 255 Square", 	"C3=3", 			"H2b=i^2-j^2", 		"wa_0JLkY_G0"],
		["255 x 255 Square", 	"C3=3", 			"H3a=i^3-3ij^2", 	"daLAUpotALw"],
		
		["255 x 255 Square", 	"H3a at t=1/30", 	"H2a=ij", 			"d8tnvF5cj-M"],
		["255 x 255 Square", 	"H3a at t=1/30", 	"H2b=i^2-j^2", 		"yaw11OptESM"],
		
		["255 x 255 Square", 	"H4a at t=0.00233", "H2a=ij", 			"OjsiniaX9wI"],
		["255 x 255 Square", 	"H4a at t=0.00233", "H2b=i^2-j^2", 		"Atx6OMR0LkU"],
		["255 x 255 Square", 	"H4a at t=0.00233", "H3a=i^3-3ij^2",	"6vaTcWepcDo"],
				
		["255 x 255 Square", 	"H4b at t=0.5", 	"H2a=ij", 			"5wHD-TZDqQ0"],
		["255 x 255 Square", 	"H4b at t=0.5", 	"H2b=i^2-j^2", 		"78M7acsBrmo"],
		["255 x 255 Square", 	"H4b at t=0.5", 	"H3a=i^3-3ij^2", 	"tQK5B0xZor0"],
		["255 x 255 Square", 	"H4b at t=0.5", 	"H4a=i^4-6i^2j^2+j^4-i^2-j^2", 		"1MtKEUXMND4"],
		
		["255 x 255 Square", 	"H4b at t=1/3", 	"H2a=ij", 			"uGqkf7vSMUI"],
		["255 x 255 Square", 	"H4b at t=1/3", 	"H2b=i^2-j^2", 		"DyVoxB8abJ4"],
				
		["255 x 255 Square", 	"H4a(H4b(I, t=0.5), t=0.125)", 	"H2a=ij", 			"EVlX8jakBTI"],
		["255 x 255 Square", 	"H4a(H4b(I, t=0.5), t=0.125)", 	"H2b=i^2-j^2", 		"MP7Ugap2SeU"],
		["255 x 255 Square", 	"H4a(H4b(I, t=0.5), t=0.125)", 	"H3a=i^3-3ij^2", 	"WH-1TcIOkN0"],
		
		["255 x 255 Square", 	"IST Austria",	"H3a=i^3-3ij^2", 	"APgHZaQgdYg"],
		["255 x 255 Square", 	"IST Austria",	"H3a=i^3-3ij^2 (stoch.)", 	"TRPb2o7ybMw"],
		
		["63 x 63 Square", 		"Identity", 		"H1a=i", 			"j6cU6c1dw9g"],
		["63 x 63 Square", 		"Identity", 		"H2a=ij", 			"t6x-i2vwuO0"],
		["63 x 63 Square", 		"Identity", 		"H2b=i^2-j^2", 		"n_edrWiwCfs"],
		["63 x 63 Square", 		"Identity", 		"H3a=i^3-3ij^2", 	"bZTWVFwtfEo"],
		["63 x 63 Square", 		"Identity", 		"H4a=i^4-6i^2j^2+j^4-i^2-j^2", 	"4gZJiVrOuvg"],
		["63 x 63 Square", 		"Identity", 		"H4b=i^3j-ij^3", 	"yTbkyjoUSmo"],
		
		["511 x 511 Square", 	"Identity", 		"H1a=i", 			"cCuKcMhvrgk"],
		["511 x 511 Square", 	"Identity", 		"H2a=ij", 			"6BVTvw1714g"],
		
		["243 x 81 Rectangle", 	"Identity", 		"H1a=i", 			"tCIlHSU0eVM"],
		["243 x 81 Rectangle", 	"Identity", 		"H2a=ij", 			"0AjOrUrGheQ"],
		["243 x 81 Rectangle", 	"Identity", 		"H2b=i^2-j^2", 		"d7AVBVYHncM"],
		["243 x 81 Rectangle", 	"Identity", 		"H3a=i^3-3ij^2", 	"-SY6Ln7wBwk"],
		["243 x 81 Rectangle", 	"Identity", 		"H4a=i^4-6i^2j^2+j^4-i^2-j^2", 	"nn8FWMqXJdg"],
		["243 x 81 Rectangle", 	"Identity", 		"H4b=i^3j-ij^3", 	"x-S5tpG6bNc"],
		
		["Circle, d=255", 		"Identity", 		"H1a=i", 			"NAn3N4mHANg"],
		["Circle, d=255", 		"Identity", 		"H2a=ij", 			"tC3CpkDjIAw"],
		["Circle, d=255", 		"Identity", 		"H2b=i^2-j^2", 		"nwJA1a0CMdk"],
		["Circle, d=255", 		"Identity", 		"H3a=i^3-3ij^2", 	"xqs-7_aY5mM"],
		["Circle, d=255", 		"Identity", 		"H4a=i^4-6i^2j^2+j^4-i^2-j^2", 	"DUE9nBCGwss"],
		["Circle, d=255", 		"Identity", 		"H4b=i^3j-ij^3", 	"4KPbfS9Pnio"],
		
		["255 x 255 punctured Square", 	"Identity", "H1a=i", 			"DgofM5vLBnc"],
		["255 x 255 punctured Square", 	"Identity", "H2a=ij", 			"DsFAPYDvzLA"],
		["255 x 255 punctured Square", 	"Identity", "H2b=i^2-j^2", 		"xFXTpTMVaoE"],
		["255 x 255 punctured Square", 	"Identity", "H3a=i^3-3ij^2", 	"5va-y0W808M"],
		["255 x 255 punctured Square", 	"Identity", "H4a=i^4-6i^2j^2+j^4-i^2-j^2", 	"WKibftDdgEM"],
		["255 x 255 punctured Square", 	"Identity", "H4b=i^3j-ij^3", 	"YTWZYe5yG7s"],
		
		["255^2 Square with 63^2 Hole", 	"Identity", 		"H2a=ij", 			"t4rmSxxeZeU"]
	  ];
	  
	  scalingVideos = [
		// Harmonic 			Time				VideoID
		["None", 				"0.0", 				"UpLOn3X0KsA"],
		["H1a=i", 				"0.25",				"soIFnW2zJoU"],
		["H2a=ij", 				"0.5",				"Z01uiD7LJUU"],
		["H2a=ij", 				"1/30*(255/N)",		"cU8m0pA8GRE"],
		["H3a=i^3-3ij^2", 		"1/30",				"D7RzQajWQrY"],
		["H3a=i^3-3ij^2", 		"1/30*(255/N)",		"C06Td3ZRtkI"],
		["H3a=i^3-3ij^2", 		"0.25",				"0ohrG9uCNZs"],
		["H3a=i^3-3ij^2", 		"0.02*(63/N)",		"t6BIFhcvBO4"],
		["H4a=i^4-6i^2j^2+j^4-i^2-j^2", "0.00283333*(255/N)",		"05YuuomVtO4"],
		["H4a=i^4-6i^2j^2+j^4-i^2-j^2", "0.000104167*(255/N)^2",		"JnDjfbafag4"],
		["H4b=i^3j-ij^3", "0.5",		"33OEAtzd3Iw"]
	  ];
	  
	  maskVideos = [
		// Transformation					Harmonic			Time 				VideoID
		["255x255 square to circle d=255", 	"None",				"0.0", 				"9QgnoXWq01o"],
		
		["255x255 square to circle d=255", 	"H2a=ij",			"0.5", 				"HOWRNQ1-tYU"]
	  ];
	  
	  initDomains();
	  initScalingHarmonics(false);
	  initMaskTrafo(false);
	
      // load IFrame Player API code asynchronously.
      var tag = document.createElement('script');
      tag.src = "https://www.youtube.com/iframe_api";
      var firstScriptTag = document.getElementsByTagName('script')[0];
      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

      // Create YouTube player after Player API downloaded (called by Player API).
      //    after the API code downloads.
      var player;
      function onYouTubeIframeAPIReady() {
        player = new YT.Player('player', {
          height: '813',
          width: '757',
          videoId: getCurrentVideoUrl(),
		  playerVars: {
			'autoplay': 0,
			'enablejsapi': 1,
			'iv_load_policy': 3,
			'modestbranding': 0,
			'rel': 0,
			'showinfo': 0
		  },
          events: {
            'onReady': onPlayerReady
            //'onStateChange': onPlayerStateChange
          }
        });
      }
	  function onResize()
	  {
		var refHeight = 813;
        var refWidth = 757;
	  
		var playerObj = document.getElementById("player");
		var playerBoxObj = document.getElementById("playerBox");
		if(!playerObj || !playerBoxObj)
			return;
		var width = Math.min(playerBox.offsetWidth, refWidth);
		var height = Math.round(width/refWidth*refHeight);

		playerObj.width = width;
		playerObj.height = height;
	  }
	  window.addEventListener('resize', onResize);
	  window.addEventListener("load", onResize); 
	  
	  function onPlayerReady(evt) 
	  {
		document.getElementById("harmonic").onchange = playVideo;
		document.getElementById("scalingTime").onchange = playScalingVideo;
		document.getElementById("maskTime").onchange = playMaskVideo;
	  }
	  
	  function setMode()
	  {
		if(document.getElementById("mode").value == "scaling")
		{
			document.getElementById("domainDiv").style.display = "none";
			document.getElementById("configurationDiv").style.display = "none";
			document.getElementById("harmonicDiv").style.display = "none";
			
			document.getElementById("scalingHarmonicsDiv").style.display = "block";
			document.getElementById("scalingTimeDiv").style.display = "block";
			
			document.getElementById("maskTrafoDiv").style.display = "none";
			document.getElementById("maskHarmonicsDiv").style.display = "none";
			document.getElementById("maskTimeDiv").style.display = "none";
			
			playScalingVideo();
		}
		else if(document.getElementById("mode").value == "mask")
		{
			document.getElementById("domainDiv").style.display = "none";
			document.getElementById("configurationDiv").style.display = "none";
			document.getElementById("harmonicDiv").style.display = "none";
			
			document.getElementById("scalingHarmonicsDiv").style.display = "none";
			document.getElementById("scalingTimeDiv").style.display = "none";
			
			document.getElementById("maskTrafoDiv").style.display = "block";
			document.getElementById("maskHarmonicsDiv").style.display = "block";
			document.getElementById("maskTimeDiv").style.display = "block";
			
			playMaskVideo();
		}
		else
		{
			document.getElementById("domainDiv").style.display = "block";
			document.getElementById("configurationDiv").style.display = "block";
			document.getElementById("harmonicDiv").style.display = "block";
			
			document.getElementById("scalingHarmonicsDiv").style.display = "none";
			document.getElementById("scalingTimeDiv").style.display = "none";
			
			document.getElementById("maskTrafoDiv").style.display = "none";
			document.getElementById("maskHarmonicsDiv").style.display = "none";
			document.getElementById("maskTimeDiv").style.display = "none";
			
			playVideo();
		}
		
	  }

	  ////////////////////////////////////////////
	  // Harmonic Dynamics
	  ////////////////////////////////////////////
	  function domainFilter(value, index, self) 
	  {
		for(var i=0; i<self.length; i++)
		{
			if(self[i][0] === value[0])
				return i===index;
		}
		return true;
	  }
	  function configurationFilter(value, index, self) 
	  {
		if(value[0] != this)
			return false;
		for(var i=0; i<index; i++)
		{
			if(self[i][0] == this && self[i][1] === value[1])
				return false;
		}
		return true;
	  }
	  function harmonicFilter(value, index, self) 
	  {
		if(value[0] != this[0] || value[1] != this[1])
			return false;
		else
			return true;
	  }
	  
      function initDomains()
	  {
		var domainObject = document.getElementById("domains");
		var uniqueDomains = videos.filter(domainFilter);
		for(var i=0; i<uniqueDomains.length; i++)
		{
			var newOption = document.createElement("option");
			newOption.text = uniqueDomains[i][0];
			domainObject.add(newOption); 
		}
		initConfiguration();
	  }
	  function initConfiguration()
	  {
		var domain = document.getElementById("domains").value;
		var configurationObject = document.getElementById("configuration");
		var lastConfiguration = configurationObject.value;
		while(configurationObject.length > 0)
		{
			configurationObject.remove(0);
		}
		
		var uniqueConfigurations = videos.filter(configurationFilter, domain);
		for(var i=0; i<uniqueConfigurations.length; i++)
		{
			var newOption = document.createElement("option");
			newOption.text = uniqueConfigurations[i][1];
			configurationObject.add(newOption); 
		}
		for(var i=0; i<configurationObject.length; i++)
		{
			if(configurationObject.options.item(i).text == lastConfiguration)
			{
				configurationObject.selectedIndex = i;
				break;
			}
		}
		initHarmonic();
	  }
	  
	  function initHarmonic()
	  {
		var domain = document.getElementById("domains").value;
		var configuration = document.getElementById("configuration").value;
		var harmonicObject = document.getElementById("harmonic");
		var lastHarmonic = harmonicObject.value;
		while(harmonicObject.length > 0)
		{
			harmonicObject.remove(0);
		}
		
		var uniqueHarmonics = videos.filter(harmonicFilter, [domain, configuration]);
		for(var i=0; i<uniqueHarmonics.length; i++)
		{
			var newOption = document.createElement("option");
			newOption.text = uniqueHarmonics[i][2];
			harmonicObject.add(newOption); 
		}
		for(var i=0; i<harmonicObject.length; i++)
		{
			if(harmonicObject.options.item(i).text == lastHarmonic)
			{
				harmonicObject.selectedIndex = i;
				break;
			}
		}
		playVideo();
	  }
	  function getCurrentVideoUrl()
	  {
		var domain = document.getElementById("domains").value;
		var configuration = document.getElementById("configuration").value;
		var harmonic = document.getElementById("harmonic").value;
		for(var i=0; i<videos.length; i++)
		{
			if(videos[i][0] == domain && videos[i][1]==configuration && videos[i][2]==harmonic)
			{
				return videos[i][3];
			}
		}
		return videos[0][3];
	  }
	  function playVideo()
	  {
		if(player)
		{
			//player.loadVideoById({videoId:url});
			player.cueVideoById(
			{
				'videoId': getCurrentVideoUrl(),
				'playerVars': {
					'autoplay': 0,
					'enablejsapi': 1,
					'iv_load_policy': 3,
					'modestbranding': 0,
					'rel': 0,
					'showinfo': 0
				  }
			});
				
		}
	  }
	  
	  ////////////////////////////////////////////
	  // Domain scaling
	  ////////////////////////////////////////////
	  function scalingHarmonicFilter(value, index, self) 
	  {
		for(var i=0; i<self.length; i++)
		{
			if(self[i][0] === value[0])
				return i===index;
		}
		return true;
	  }
	  function scalingTimeFilter(value, index, self) 
	  {
		if(value[0] != this)
			return false;
		else
			return true;
	  }
	  
      function initScalingHarmonics(shouldPlay)
	  {
		var scalingHarmonicsObject = document.getElementById("scalingHarmonics");
		var uniqueHarmonics = scalingVideos.filter(scalingHarmonicFilter);
		for(var i=0; i<uniqueHarmonics.length; i++)
		{
			var newOption = document.createElement("option");
			newOption.text = uniqueHarmonics[i][0];
			scalingHarmonicsObject.add(newOption); 
		}
		initScalingTime(shouldPlay);
	  }
	  
	  function initScalingTime(shouldPlay)
	  {
		var harmonic = document.getElementById("scalingHarmonics").value;
		var scalingTimeObject = document.getElementById("scalingTime");
		var lastTime = scalingTimeObject.value;
		while(scalingTimeObject.length > 0)
		{
			scalingTimeObject.remove(0);
		}
		
		var uniqueTimes = scalingVideos.filter(scalingTimeFilter, harmonic);
		for(var i=0; i<uniqueTimes.length; i++)
		{
			var newOption = document.createElement("option");
			newOption.text = uniqueTimes[i][1];
			scalingTimeObject.add(newOption); 
		}
		for(var i=0; i<scalingTimeObject.length; i++)
		{
			if(scalingTimeObject.options.item(i).text == lastTime)
			{
				scalingTimeObject.selectedIndex = i;
				break;
			}
		}
		if(shouldPlay)
			playScalingVideo();
	  }
	  function getScalingCurrentVideoUrl()
	  {
		var harmonic = document.getElementById("scalingHarmonics").value;
		var time = document.getElementById("scalingTime").value;
		for(var i=0; i<scalingVideos.length; i++)
		{
			if(scalingVideos[i][0] == harmonic && scalingVideos[i][1]==time)
			{
				return scalingVideos[i][2];
			}
		}
		return scalingVideos[0][2];
	  }
	  function playScalingVideo()
	  {
		if(player)
		{
			//player.loadVideoById({videoId:url});
			player.cueVideoById(
			{
				'videoId': getScalingCurrentVideoUrl(),
				'playerVars': {
					'autoplay': 0,
					'enablejsapi': 1,
					'iv_load_policy': 3,
					'modestbranding': 0,
					'rel': 0,
					'showinfo': 0
				  }
			});
				
		}
	  }
	  
	  ////////////////////////////////////////////
	  // Mask Transformation
	  ////////////////////////////////////////////
	  function maskTrafoFilter(value, index, self) 
	  {
		for(var i=0; i<self.length; i++)
		{
			if(self[i][0] === value[0])
				return i===index;
		}
		return true;
	  }
	  function maskHarmonicFilter(value, index, self) 
	  {
		if(value[0] != this)
			return false;
		for(var i=0; i<index; i++)
		{
			if(self[i][0] == this && self[i][1] === value[1])
				return false;
		}
		return true;
	  }
	  function maskTimeFilter(value, index, self) 
	  {
		if(value[0] != this[0] || value[1] != this[1])
			return false;
		else
			return true;
	  }
	  
      function initMaskTrafo(shouldPlay)
	  {
		var maskTrafoObject = document.getElementById("maskTrafo");
		var uniqueTrafos = maskVideos.filter(maskTrafoFilter);
		for(var i=0; i<uniqueTrafos.length; i++)
		{
			var newOption = document.createElement("option");
			newOption.text = uniqueTrafos[i][0];
			maskTrafoObject.add(newOption); 
		}
		initMaskHarmonics(shouldPlay);
	  }
	  
	  function initMaskHarmonics(shouldPlay)
	  {
		var trafo = document.getElementById("maskTrafo").value;
		var maskHarmonicsObject = document.getElementById("maskHarmonics");
		var lastHarmonic = maskHarmonicsObject.value;
		while(maskHarmonicsObject.length > 0)
		{
			maskHarmonicsObject.remove(0);
		}
		
		var uniqueHarmonics = maskVideos.filter(maskHarmonicFilter, trafo);
		for(var i=0; i<uniqueHarmonics.length; i++)
		{
			var newOption = document.createElement("option");
			newOption.text = uniqueHarmonics[i][1];
			maskHarmonicsObject.add(newOption); 
		}
		for(var i=0; i<maskHarmonicsObject.length; i++)
		{
			if(maskHarmonicsObject.options.item(i).text == lastHarmonic)
			{
				maskHarmonicsObject.selectedIndex = i;
				break;
			}
		}
		initMaskTime(shouldPlay);
	  }
	  function initMaskTime(shouldPlay)
	  {
		var trafo = document.getElementById("maskTrafo").value;
		var harmonic = document.getElementById("maskHarmonics").value;
		var maskTimeObject = document.getElementById("maskTime");
		var lastTime = maskTimeObject.value;
		while(maskTimeObject.length > 0)
		{
			maskTimeObject.remove(0);
		}
		
		var uniqueTimes = maskVideos.filter(maskTimeFilter, [trafo, harmonic]);
		for(var i=0; i<uniqueTimes.length; i++)
		{
			var newOption = document.createElement("option");
			newOption.text = uniqueTimes[i][2];
			maskTimeObject.add(newOption); 
		}
		for(var i=0; i<maskTimeObject.length; i++)
		{
			if(maskTimeObject.options.item(i).text == lastTime)
			{
				maskTimeObject.selectedIndex = i;
				break;
			}
		}
		if(shouldPlay)
			playMaskVideo();
	  }
	  
	  function getMaskCurrentVideoUrl()
	  {
		var trafo = document.getElementById("maskTrafo").value;
		var harmonic = document.getElementById("maskHarmonics").value;
		var time = document.getElementById("maskTime").value;
		for(var i=0; i<maskVideos.length; i++)
		{
			if(maskVideos[i][0] == trafo && maskVideos[i][1]==harmonic && maskVideos[i][2]==time)
			{
				return maskVideos[i][3];
			}
		}
		return maskVideos[0][3];
	  }
	  function playMaskVideo()
	  {
		if(player)
		{
			//player.loadVideoById({videoId:url});
			player.cueVideoById(
			{
				'videoId': getMaskCurrentVideoUrl(),
				'playerVars': {
					'autoplay': 0,
					'enablejsapi': 1,
					'iv_load_policy': 3,
					'modestbranding': 0,
					'rel': 0,
					'showinfo': 0
				  }
			});
				
		}
	  }
    </script>


</p>